#include "systemc.h"

#ifndef CONSUMER_H_
#define CONSUMER_H_

SC_MODULE(Consumer){

	sc_in<int> data;
	int readNumber;
	sc_out<int> cFloor;
	sc_vector< sc_in< sc_bv< 1 > > > upList;
	sc_vector< sc_in< sc_bv< 1 > > > downList;
	bool etst;

	SC_CTOR(Consumer){
		readNumber = 0;
		etst = false;
		upList.init(4);
		downList.init(4);
		cFloor.initialize(0);
		SC_METHOD(consume);
		sensitive << data;
		dont_initialize();
	}

	void consume()
	{
		readNumber = data.read();
		cout << "[" << sc_time_stamp() << " / " << sc_delta_count() << "](" << name() << "): read " << readNumber << endl;
		cout << (bool)checkUpList() << endl;
	}

	bool checkUpList(){
		for(uint i(cFloor);i < upList.size();i++){
			if(upList[i].read()== "1"){
				return true;
			}
		}
		return false;
	}

	bool checkDownList(){
		for(int i(0);i < cFloor;i++){
			if(downList[i].read() == "1"){
				return true;
			}
		}
		return false;
	}
};

#endif
